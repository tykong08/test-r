# GazeHome Edge Device# ğŸ  GazeHome Edge Device# ğŸ  GazeHome Edge Device



[![Python](https://img.shields.io/badge/Python-3.11-blue.svg)](https://www.python.org/)

[![FastAPI](https://img.shields.io/badge/FastAPI-0.104.1-green.svg)](https://fastapi.tiangolo.com/)

[![OpenCV](https://img.shields.io/badge/OpenCV-4.8.1-red.svg)](https://opencv.org/)[![Python](https://img.shields.io/badge/Python-3.11-blue.svg)](https://www.python.org/)[![Python](https://img.shields.io/badge/Python-3.11-blue.svg)](https://www.python.org/)

[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED.svg)](https://www.docker.com/)

[![FastAPI](https://img.shields.io/badge/FastAPI-0.104.1-green.svg)](https://fastapi.tiangolo.com/)[![FastAPI](https://img.shields.io/badge/FastAPI-0.104.1-green.svg)](https://fastapi.tiangolo.com/)

ì‹œì„  ì¶”ì  ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸í™ˆ ì œì–´ ì‹œìŠ¤í…œ

[![OpenCV](https://img.shields.io/badge/OpenCV-4.8.1-red.svg)](https://opencv.org/)[![OpenCV](https://img.shields.io/badge/OpenCV-4.8.1-red.svg)](https://opencv.org/)

---

[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED.svg)](https://www.docker.com/)[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## ê¸°ëŠ¥



- **ì‹œì„  ì¶”ì **: dlib ê¸°ë°˜ 68-point facial landmark ê°ì§€

- **5-Point ë³´ì •**: í™”ë©´ 5ê°œ í¬ì¸íŠ¸ ë³´ì • (Affine ë³€í™˜)> **ì‹œì„  ì¶”ì  ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸í™ˆ ì œì–´ ì‹œìŠ¤í…œ** - ëˆˆë™ìì˜ ì›€ì§ì„ë§Œìœ¼ë¡œ ìŠ¤ë§ˆíŠ¸í™ˆì„ ì œì–´í•˜ëŠ” ì ‘ê·¼ì„± ì†”ë£¨ì…˜> **ì‹œì„  ì¶”ì  ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸í™ˆ ì œì–´ ì‹œìŠ¤í…œ** - ëˆˆë™ìì˜ ì›€ì§ì„ë§Œìœ¼ë¡œ ìŠ¤ë§ˆíŠ¸í™ˆì„ ì œì–´í•˜ëŠ” ì ‘ê·¼ì„± ì†”ë£¨ì…˜

- **Dwell Click**: 0.8ì´ˆ ì‘ì‹œë¡œ í´ë¦­ (0.3~2.0ì´ˆ ì¡°ì ˆ ê°€ëŠ¥)

- **Blink Click**: 0.3~1.0ì´ˆ ê¹œë¹¡ì„ìœ¼ë¡œ í´ë¦­

- **AI ì¶”ì²œ**: ì‹œê°„/ë‚ ì”¨/ë””ë°”ì´ìŠ¤ ìƒíƒœ ê¸°ë°˜ ì œì–´ ì œì•ˆ

- **WebSocket**: ì‹¤ì‹œê°„ ì‹œì„  ìœ„ì¹˜ ìŠ¤íŠ¸ë¦¬ë°GazeHome Edge DeviceëŠ” ì‹ ì²´ì  ì¥ì• ê°€ ìˆëŠ” ì‚¬ìš©ìë¥¼ ìœ„í•œ í˜ì‹ ì ì¸ ì ‘ê·¼ì„± ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. ì‹œì„ ê³¼ ê¹œë¹¡ì„ë§Œìœ¼ë¡œ ìŠ¤ë§ˆíŠ¸í™ˆ ë””ë°”ì´ìŠ¤ë¥¼ ì œì–´í•  ìˆ˜ ìˆìœ¼ë©°, AI ê¸°ë°˜ ì¶”ì²œ ì‹œìŠ¤í…œì´ ì‚¬ìš©ìì˜ ì˜ë„ë¥¼ ë¶„ì„í•˜ì—¬ ë”ìš± í¸ë¦¬í•œ ì œì–´ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.GazeHome Edge DeviceëŠ” ì‹ ì²´ì  ì¥ì• ê°€ ìˆëŠ” ì‚¬ìš©ìë¥¼ ìœ„í•œ í˜ì‹ ì ì¸ ì ‘ê·¼ì„± ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. ì‹œì„ ê³¼ ê¹œë¹¡ì„ë§Œìœ¼ë¡œ ìŠ¤ë§ˆíŠ¸í™ˆ ë””ë°”ì´ìŠ¤ë¥¼ ì œì–´í•  ìˆ˜ ìˆìœ¼ë©°, AI ê¸°ë°˜ ì¶”ì²œ ì‹œìŠ¤í…œì´ ì‚¬ìš©ìì˜ ì˜ë„ë¥¼ ë¶„ì„í•˜ì—¬ ë”ìš± í¸ë¦¬í•œ ì œì–´ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.

- **Gateway ì—°ë™**: aiohttp ê¸°ë°˜ ë””ë°”ì´ìŠ¤ ì œì–´



---

---<p align="center">

## ê¸°ìˆ  ìŠ¤íƒ

  <img src="https://via.placeholder.com/800x400?text=GazeHome+Demo+Screenshot" alt="GazeHome Demo" width="800"/>

- **Backend**: FastAPI 0.104.1, uvicorn[standard]

- **Computer Vision**: OpenCV 4.8.1.78, dlib 19.24.2## âœ¨ ì£¼ìš” ê¸°ëŠ¥</p>

- **Frontend**: Vanilla JavaScript, WebSocket

- **Deployment**: Docker, Docker Compose (ARM64 ì§€ì›)



---### ğŸ¯ ì‹œì„  ì¶”ì  (Gaze Tracking)---



## í”„ë¡œì íŠ¸ êµ¬ì¡°- **ì‹¤ì‹œê°„ ì‹œì„  ìœ„ì¹˜ ì¶”ì **: dlib ê¸°ë°˜ 68-point facial landmark ê°ì§€



```- **5-Point ë³´ì • ì‹œìŠ¤í…œ**: í™”ë©´ì˜ 5ê°œ í¬ì¸íŠ¸ë¥¼ í™œìš©í•œ ì •ë°€ ë³´ì •

GazeTracking-master/

â”œâ”€â”€ Dockerfile                       # Docker ì»¨í…Œì´ë„ˆ ì„¤ì •- **Affine ë³€í™˜**: ë³´ì • ë°ì´í„°ë¥¼ í™œìš©í•œ ì •í™•í•œ ìŠ¤í¬ë¦° ì¢Œí‘œ ë§¤í•‘

â”œâ”€â”€ docker-compose.yml               # Docker Compose ì„¤ì •

â”œâ”€â”€ run_raspberry_pi.sh              # ë¼ì¦ˆë² ë¦¬íŒŒì´ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸- **ì§€ì†ì„± ë³´ì • ì €ì¥**: JSON íŒŒì¼ë¡œ ë³´ì • ë°ì´í„° ì €ì¥ ë° ì¬ì‚¬ìš©---

â”œâ”€â”€ requirements.txt                 # Python ì˜ì¡´ì„±

â”‚

â”œâ”€â”€ edge/

â”‚   â”œâ”€â”€ app.py                      # FastAPI ë©”ì¸ ì„œë²„### ğŸ‘† ì´ì¤‘ í´ë¦­ ëª¨ë“œ## âœ¨ ì£¼ìš” ê¸°ëŠ¥

â”‚   â”œâ”€â”€ config.json                 # ì„¤ì • íŒŒì¼

â”‚   â”‚- **Dwell Click (ì‘ì‹œ í´ë¦­)**: ì¼ì • ì‹œê°„(ê¸°ë³¸ 0.8ì´ˆ) ì‘ì‹œë¡œ í´ë¦­

â”‚   â”œâ”€â”€ core/

â”‚   â”‚   â”œâ”€â”€ config.py               # ì„¤ì • ê´€ë¦¬  - ì‹¤ì‹œê°„ ì§„í–‰ë„ í‘œì‹œ (íŒŒë€ ì›)### ğŸ¯ ì‹œì„  ì¶”ì  (Gaze Tracking)

â”‚   â”‚   â””â”€â”€ database.py             # SQLite DB

â”‚   â”‚  - ì¡°ì ˆ ê°€ëŠ¥í•œ ì‘ì‹œ ì‹œê°„ (0.3~2.0ì´ˆ)- **ì‹¤ì‹œê°„ ì‹œì„  ìœ„ì¹˜ ì¶”ì **: dlib ê¸°ë°˜ 68-point facial landmark ê°ì§€

â”‚   â”œâ”€â”€ gaze/

â”‚   â”‚   â”œâ”€â”€ tracker.py              # ì‹œì„  ì¶”ì  + í´ë¦­ ê°ì§€- **Blink Click (ê¹œë¹¡ì„ í´ë¦­)**: ì˜ë„ì ì¸ ê¹œë¹¡ì„(0.3~1.0ì´ˆ)ìœ¼ë¡œ í´ë¦­- **5-Point ë³´ì • ì‹œìŠ¤í…œ**: í™”ë©´ì˜ 5ê°œ í¬ì¸íŠ¸ë¥¼ í™œìš©í•œ ì •ë°€ ë³´ì •

â”‚   â”‚   â””â”€â”€ calibrator.py           # 5-point ë³´ì •

â”‚   â”‚  - ìì—°ìŠ¤ëŸ¬ìš´ ê¹œë¹¡ì„ í•„í„°ë§ (< 0.3ì´ˆ)- **Affine ë³€í™˜**: ë³´ì • ë°ì´í„°ë¥¼ í™œìš©í•œ ì •í™•í•œ ìŠ¤í¬ë¦° ì¢Œí‘œ ë§¤í•‘

â”‚   â”œâ”€â”€ model/

â”‚   â”‚   â”œâ”€â”€ gaze_tracking.py        # dlib ì‹œì„  ì¶”ì  ë¼ì´ë¸ŒëŸ¬ë¦¬  - ëˆˆ ê°ì€ ì‹œê°„ ì¶”ì  ë° ê²€ì¦- **ì§€ì†ì„± ë³´ì • ì €ì¥**: JSON íŒŒì¼ë¡œ ë³´ì • ë°ì´í„° ì €ì¥ ë° ì¬ì‚¬ìš©

â”‚   â”‚   â”œâ”€â”€ eye.py                  # ëˆˆ ê°ì§€

â”‚   â”‚   â”œâ”€â”€ pupil.py                # ë™ê³µ ìœ„ì¹˜

â”‚   â”‚   â””â”€â”€ trained_models/

â”‚   â”‚       â””â”€â”€ shape_predictor_68_face_landmarks.dat### ğŸ¤– AI ì¶”ì²œ ì‹œìŠ¤í…œ### ğŸ‘† ì´ì¤‘ í´ë¦­ ëª¨ë“œ

â”‚   â”‚

â”‚   â”œâ”€â”€ services/- **ì»¨í…ìŠ¤íŠ¸ ì¸ì‹**: ì‹œê°„, ë‚ ì”¨, ë””ë°”ì´ìŠ¤ ìƒíƒœ ë¶„ì„- **Dwell Click (ì‘ì‹œ í´ë¦­)**: ì¼ì • ì‹œê°„(ê¸°ë³¸ 0.8ì´ˆ) ì‘ì‹œë¡œ í´ë¦­

â”‚   â”‚   â”œâ”€â”€ ai_service.py           # AI ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸

â”‚   â”‚   â””â”€â”€ device_manager.py       # ë””ë°”ì´ìŠ¤ ê´€ë¦¬- **ìë™ ì œì–´ ì œì•ˆ**: AIê°€ ì‚¬ìš©ì ì˜ë„ë¥¼ ë¶„ì„í•˜ì—¬ ì¶”ì²œ  - ì‹¤ì‹œê°„ ì§„í–‰ë„ í‘œì‹œ (íŒŒë€ ì›)

â”‚   â”‚

â”‚   â”œâ”€â”€ templates/- **YES/NO ì‘ë‹µ**: ê°„ë‹¨í•œ ì‘ë‹µìœ¼ë¡œ ì¶”ì²œ ìˆ˜ë½/ê±°ë¶€  - ì¡°ì ˆ ê°€ëŠ¥í•œ ì‘ì‹œ ì‹œê°„ (0.3~2.0ì´ˆ)

â”‚   â”‚   â””â”€â”€ index.html              # ì›¹ UI

â”‚   â”‚- **ì‹¤ì‹œê°„ ì•Œë¦¼**: íŒì—… ë‹¤ì´ì–¼ë¡œê·¸ë¡œ ì¶”ì²œ í‘œì‹œ- **Blink Click (ê¹œë¹¡ì„ í´ë¦­)**: ì˜ë„ì ì¸ ê¹œë¹¡ì„(0.3~1.0ì´ˆ)ìœ¼ë¡œ í´ë¦­

â”‚   â””â”€â”€ static/

â”‚       â”œâ”€â”€ app.js                  # í”„ë¡ íŠ¸ì—”ë“œ ë¡œì§  - ìì—°ìŠ¤ëŸ¬ìš´ ê¹œë¹¡ì„ í•„í„°ë§ (< 0.3ì´ˆ)

â”‚       â””â”€â”€ style.css               # ìŠ¤íƒ€ì¼

â”‚### ğŸŒ ì‹¤ì‹œê°„ ì›¹ UI  - ëˆˆ ê°ì€ ì‹œê°„ ì¶”ì  ë° ê²€ì¦

â”œâ”€â”€ ai-services-main/                # AI ì¶”ì²œ ì„œë¹„ìŠ¤

â””â”€â”€ gateway-main/                    # Gateway ì„œë¹„ìŠ¤- **WebSocket ê¸°ë°˜**: ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹ 

```

- **ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë°**: ì¹´ë©”ë¼ ì˜ìƒ ì˜¤ë²„ë ˆì´ í‘œì‹œ### ğŸ¤– AI ì¶”ì²œ ì‹œìŠ¤í…œ

---

- **ì‹œì„  í¬ì¸í„°**: ë…¹ìƒ‰ ê·¸ë¼ë°ì´ì…˜ í¬ì¸í„°ë¡œ ì‹œì„  ìœ„ì¹˜ ì‹œê°í™”- **ì»¨í…ìŠ¤íŠ¸ ì¸ì‹**: ì‹œê°„, ë‚ ì”¨, ë””ë°”ì´ìŠ¤ ìƒíƒœ ë¶„ì„

## ì„¤ì¹˜ ë° ì‹¤í–‰

- **ë””ë°”ì´ìŠ¤ ì¹´ë“œ**: ìŠ¤ë§ˆíŠ¸ ë””ë°”ì´ìŠ¤ ìƒíƒœ ë° ì œì–´ UI- **ìë™ ì œì–´ ì œì•ˆ**: AIê°€ ì‚¬ìš©ì ì˜ë„ë¥¼ ë¶„ì„í•˜ì—¬ ì¶”ì²œ

### ë°©ë²• 1: Python ì§ì ‘ ì‹¤í–‰

- **ë°˜ì‘í˜• ë””ìì¸**: ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸° ì§€ì›- **YES/NO ì‘ë‹µ**: ê°„ë‹¨í•œ ì‘ë‹µìœ¼ë¡œ ì¶”ì²œ ìˆ˜ë½/ê±°ë¶€

```bash

# 1. í™˜ê²½ ìƒì„±- **ì‹¤ì‹œê°„ ì•Œë¦¼**: íŒì—… ë‹¤ì´ì–¼ë¡œê·¸ë¡œ ì¶”ì²œ í‘œì‹œ

conda create -n gaze311 python=3.11

conda activate gaze311### ğŸ”Œ Gateway ì—°ë™



# 2. ì˜ì¡´ì„± ì„¤ì¹˜- **ë¹„ë™ê¸° HTTP í´ë¼ì´ì–¸íŠ¸**: aiohttp ê¸°ë°˜ íš¨ìœ¨ì ì¸ í†µì‹ ### ï¿½ ì‹¤ì‹œê°„ ì›¹ UI

pip install -r requirements.txt

- **ë””ë°”ì´ìŠ¤ ê´€ë¦¬**: ëª©ë¡ ì¡°íšŒ, ìƒíƒœ í™•ì¸, ì œì–´ ëª…ë ¹ ì „ì†¡- **WebSocket ê¸°ë°˜**: ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹ 

# 3. dlib ëª¨ë¸ ë‹¤ìš´ë¡œë“œ

cd edge/model/trained_models/- **ì£¼ê¸°ì  ìƒíƒœ ê°±ì‹ **: 5ì´ˆë§ˆë‹¤ ìë™ ìƒíƒœ ì—…ë°ì´íŠ¸- **ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë°**: ì¹´ë©”ë¼ ì˜ìƒ ì˜¤ë²„ë ˆì´ í‘œì‹œ

wget http://dlib.net/files/shape_predictor_68_face_landmarks.dat.bz2

bunzip2 shape_predictor_68_face_landmarks.dat.bz2- **Mock ëª¨ë“œ**: í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ê°€ìƒ ë””ë°”ì´ìŠ¤ ì§€ì›- **ì‹œì„  í¬ì¸í„°**: ë…¹ìƒ‰ ê·¸ë¼ë°ì´ì…˜ í¬ì¸í„°ë¡œ ì‹œì„  ìœ„ì¹˜ ì‹œê°í™”

cd ../../..

- **ë””ë°”ì´ìŠ¤ ì¹´ë“œ**: ìŠ¤ë§ˆíŠ¸ ë””ë°”ì´ìŠ¤ ìƒíƒœ ë° ì œì–´ UI

# 4. ì„œë²„ ì‹¤í–‰

cd edge---- **ë°˜ì‘í˜• ë””ìì¸**: ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸° ì§€ì›

python app.py

```



ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8000 ì ‘ì†## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°### ï¿½ Gateway ì—°ë™



### ë°©ë²• 2: Docker ì‹¤í–‰- **ë¹„ë™ê¸° HTTP í´ë¼ì´ì–¸íŠ¸**: aiohttp ê¸°ë°˜ íš¨ìœ¨ì ì¸ í†µì‹ 



```bash```- **ë””ë°”ì´ìŠ¤ ê´€ë¦¬**: ëª©ë¡ ì¡°íšŒ, ìƒíƒœ í™•ì¸, ì œì–´ ëª…ë ¹ ì „ì†¡

# ë¹Œë“œ ë° ì‹¤í–‰

docker-compose up -dGazeTracking-master/- **ì£¼ê¸°ì  ìƒíƒœ ê°±ì‹ **: 5ì´ˆë§ˆë‹¤ ìë™ ìƒíƒœ ì—…ë°ì´íŠ¸



# ë¡œê·¸ í™•ì¸â”œâ”€â”€ ğŸ“„ Dockerfile                    # Docker ì»¨í…Œì´ë„ˆ ì„¤ì • (Raspberry Pi ì§€ì›)- **Mock ëª¨ë“œ**: í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ê°€ìƒ ë””ë°”ì´ìŠ¤ ì§€ì›

docker-compose logs -f

â”œâ”€â”€ ğŸ“„ docker-compose.yml            # Docker Compose ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜

# ì¤‘ì§€

docker-compose stopâ”œâ”€â”€ ğŸ“„ run_raspberry_pi.sh           # ë¼ì¦ˆë² ë¦¬íŒŒì´ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸---

```

â”œâ”€â”€ ğŸ“„ requirements.txt              # Python ì˜ì¡´ì„± (í†µí•©)

### ë°©ë²• 3: ë¼ì¦ˆë² ë¦¬íŒŒì´ ë°°í¬â”œâ”€â”€ ğŸ“„ .gitignore                    # Git ì œì™¸ íŒŒì¼

â”œâ”€â”€ ğŸ“„ README.md                     # í”„ë¡œì íŠ¸ ë¬¸ì„œ

```bashâ”‚

chmod +x run_raspberry_pi.shâ”œâ”€â”€ ğŸ“ edge/                         # Edge Device ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜

./run_raspberry_pi.shâ”‚   â”œâ”€â”€ ğŸ“„ app.py                   # FastAPI ë©”ì¸ ì„œë²„

```â”‚   â”œâ”€â”€ ğŸ“„ config.json              # ëŸ°íƒ€ì„ ì„¤ì •

â”‚   â”‚

---â”‚   â”œâ”€â”€ ğŸ“ core/                    # í•µì‹¬ ëª¨ë“ˆ

â”‚   â”‚   â”œâ”€â”€ config.py              # ì„¤ì • ê´€ë¦¬ì

## ì„¤ì • (config.json)â”‚   â”‚   â””â”€â”€ database.py            # SQLite ë°ì´í„°ë² ì´ìŠ¤

â”‚   â”‚

```jsonâ”‚   â”œâ”€â”€ ğŸ“ gaze/                    # ì‹œì„  ì¶”ì  ëª¨ë“ˆ

{â”‚   â”‚   â”œâ”€â”€ tracker.py             # GazeTracker ë©”ì¸ ë¡œì§

    "user_uuid": "8f6b3c54-7b3b-4d4c-9e5d-2e8b1c1d4f99",â”‚   â”‚   â””â”€â”€ calibrator.py          # 5-point ë³´ì • ì‹œìŠ¤í…œ

    "ai_service_url": "http://localhost:8001",â”‚   â”‚

    "mock_mode": true,â”‚   â”œâ”€â”€ ğŸ“ model/                   # ì‹œì„  ì¶”ì  ML ëª¨ë¸

    "gaze": {â”‚   â”‚   â”œâ”€â”€ gaze_tracking.py       # dlib ê¸°ë°˜ ì¶”ì  ë¼ì´ë¸ŒëŸ¬ë¦¬

        "dwell_time": 0.8,â”‚   â”‚   â”œâ”€â”€ eye.py                 # ëˆˆ ê°ì§€ ì•Œê³ ë¦¬ì¦˜

        "screen_width": 1920,â”‚   â”‚   â”œâ”€â”€ pupil.py               # ë™ê³µ ìœ„ì¹˜ ê°ì§€

        "screen_height": 1080,â”‚   â”‚   â”œâ”€â”€ calibration.py         # ë³´ì • ë³€í™˜ ì•Œê³ ë¦¬ì¦˜

        "camera_index": 0â”‚   â”‚   â””â”€â”€ trained_models/

    },â”‚   â”‚       â””â”€â”€ shape_predictor_68_face_landmarks.dat

    "polling": {â”‚   â”‚

        "device_status_interval": 5.0,â”‚   â”œâ”€â”€ ğŸ“ services/                # ì™¸ë¶€ ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸

        "recommendation_interval": 3.0â”‚   â”‚   â”œâ”€â”€ ai_service.py          # AI ì„œë¹„ìŠ¤ HTTP í´ë¼ì´ì–¸íŠ¸

    }â”‚   â”‚   â””â”€â”€ device_manager.py      # ë””ë°”ì´ìŠ¤ ìƒíƒœ ê´€ë¦¬

}â”‚   â”‚

```â”‚   â”œâ”€â”€ ğŸ“ templates/               # ì›¹ UI í…œí”Œë¦¿

â”‚   â”‚   â””â”€â”€ index.html             # ë©”ì¸ SPA

| íŒŒë¼ë¯¸í„° | ì„¤ëª… | ê¸°ë³¸ê°’ |â”‚   â”‚

|---------|------|--------|â”‚   â””â”€â”€ ğŸ“ static/                  # ì •ì  íŒŒì¼

| `user_uuid` | ì‚¬ìš©ì ID | - |â”‚       â”œâ”€â”€ app.js                 # í”„ë¡ íŠ¸ì—”ë“œ ë¡œì§

| `ai_service_url` | AI ì„œë¹„ìŠ¤ URL | `http://localhost:8001` |â”‚       â””â”€â”€ style.css              # ìŠ¤íƒ€ì¼ì‹œíŠ¸

| `mock_mode` | Mock ëª¨ë“œ (í…ŒìŠ¤íŠ¸ìš©) | `false` |â”‚

| `gaze.dwell_time` | Dwell í´ë¦­ ì‹œê°„ (ì´ˆ) | `0.8` |â”œâ”€â”€ ğŸ“ ai-services-main/            # AI ì¶”ì²œ ì„œë¹„ìŠ¤ (ë³„ë„ í”„ë¡œì íŠ¸)

| `gaze.camera_index` | ì¹´ë©”ë¼ ì¸ë±ìŠ¤ | `0` |â””â”€â”€ ğŸ“ gateway-main/                # Gateway ì„œë¹„ìŠ¤ (ë³„ë„ í”„ë¡œì íŠ¸)

```

---

---

## API

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### REST API

### ğŸ“‹ ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- `GET /api/state` - ì‹œìŠ¤í…œ ìƒíƒœ

- `POST /api/devices/{device_id}/control` - ë””ë°”ì´ìŠ¤ ì œì–´- **Python 3.11+**

- `POST /api/calibration/start` - ë³´ì • ì‹œì‘- **ì›¹ìº  ë˜ëŠ” USB ì¹´ë©”ë¼**

- `GET /api/calibration/progress` - ë³´ì • ì§„í–‰ë„- **ìš´ì˜ì²´ì œ**: macOS, Linux, Raspberry Pi OS

- `POST /api/dwell-time` - ì‘ì‹œ ì‹œê°„ ì„¤ì •- (ì„ íƒ) Docker & Docker Compose



### WebSocket#### ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì„¤ì¹˜



- `ws://localhost:8000/ws` - ì‹¤ì‹œê°„ ì‹œì„  ìœ„ì¹˜ ìŠ¤íŠ¸ë¦¬ë°<details>

<summary><b>macOS</b></summary>

ë©”ì‹œì§€ íƒ€ì…:

- `gaze`: ì‹œì„  ìœ„ì¹˜ `{x, y, pupils_detected}````bash

- `dwell`: ì§„í–‰ë„ `{progress: 0.0~1.0}`brew install cmake

- `click`: í´ë¦­ ì´ë²¤íŠ¸ `{method: "dwell"|"blink"}````

- `state`: ì‹œìŠ¤í…œ ìƒíƒœ ì—…ë°ì´íŠ¸</details>



---<details>

<summary><b>Ubuntu/Debian</b></summary>

## ë¬¸ì œ í•´ê²°

```bash

### ì¹´ë©”ë¼ ì—´ë¦¬ì§€ ì•ŠìŒsudo apt-get update

```bashsudo apt-get install -y build-essential cmake \

# ì¹´ë©”ë¼ í™•ì¸    libopencv-dev python3-opencv \

python -c "import cv2; print([i for i in range(5) if cv2.VideoCapture(i).isOpened()])"    libopenblas-dev liblapack-dev \

    libx11-dev libgtk-3-dev

# config.jsonì—ì„œ camera_index ìˆ˜ì •```

```</details>



### ë™ê³µ ê°ì§€ ì•ˆ ë¨<details>

- ì¡°ëª… ë°ê²Œ (ì •ë©´ ì¡°ëª…)<summary><b>Raspberry Pi</b></summary>

- ì–¼êµ´ í™”ë©´ ì •ë©´ ìœ„ì¹˜

- ì¹´ë©”ë¼ ê±°ë¦¬ 40-60cm```bash

sudo apt-get update

### dlib ì„¤ì¹˜ ì‹¤íŒ¨sudo apt-get install -y build-essential cmake \

```bash    python3-opencv libatlas-base-dev \

# macOS    libopenblas-dev liblapack-dev \

brew install cmake    v4l-utils

pip install dlib```

</details>

# Ubuntu

sudo apt-get install cmake libboost-all-dev---

pip install dlib

### ğŸ ë°©ë²• 1: Python ì§ì ‘ ì‹¤í–‰ (ê°œë°œìš©)

# Raspberry Pi (1-2ì‹œê°„ ì†Œìš”)

pip install dlib --extra-index-url https://www.piwheels.org/simple#### 1ï¸âƒ£ í™˜ê²½ ì„¤ì •

```

```bash

---# Conda í™˜ê²½ ìƒì„± (ê¶Œì¥)

conda create -n gaze311 python=3.11

## ì„±ëŠ¥conda activate gaze311



| í™˜ê²½ | FPS | ë©”ëª¨ë¦¬ |# ë˜ëŠ” venv ì‚¬ìš©

|------|-----|--------|python3 -m venv venv

| PC | 30 FPS | ~300MB |source venv/bin/activate  # Windows: venv\Scripts\activate

| ë¼ì¦ˆë² ë¦¬íŒŒì´ 4 | 15-20 FPS | ~300MB |```

| ë¼ì¦ˆë² ë¦¬íŒŒì´ 3 | 10-15 FPS | ~300MB |

#### 2ï¸âƒ£ ì˜ì¡´ì„± ì„¤ì¹˜

---

```bash

## ë¼ì´ì„ ìŠ¤# í”„ë¡œì íŠ¸ í´ë¡ 

git clone https://github.com/yourusername/gazehome-edge.git

ì ‘ê·¼ì„± í–¥ìƒì„ ëª©í‘œë¡œ ê°œë°œëœ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.cd gazehome-edge



---# Python íŒ¨í‚¤ì§€ ì„¤ì¹˜

pip install -r requirements.txt

## í¬ë ˆë”§```



- [GazeTracking](https://github.com/antoinelame/GazeTracking) - ì‹œì„  ì¶”ì  ë¼ì´ë¸ŒëŸ¬ë¦¬#### 3ï¸âƒ£ dlib ëª¨ë¸ ë‹¤ìš´ë¡œë“œ

- [dlib](http://dlib.net/) - ì–¼êµ´ ëœë“œë§ˆí¬ ê°ì§€

- [FastAPI](https://fastapi.tiangolo.com/) - ì›¹ í”„ë ˆì„ì›Œí¬```bash

- [OpenCV](https://opencv.org/) - ì»´í“¨í„° ë¹„ì „# ëª¨ë¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™

cd edge/model/trained_models/

# ëª¨ë¸ ë‹¤ìš´ë¡œë“œ ë° ì••ì¶• í•´ì œ
wget http://dlib.net/files/shape_predictor_68_face_landmarks.dat.bz2
bunzip2 shape_predictor_68_face_landmarks.dat.bz2

cd ../../..
```

#### 4ï¸âƒ£ ì„¤ì • íŒŒì¼ í¸ì§‘

`edge/config.json` íŒŒì¼ì„ ìˆ˜ì •í•˜ì„¸ìš”:

```json
{
    "user_uuid": "8f6b3c54-7b3b-4d4c-9e5d-2e8b1c1d4f99",
    "ai_service_url": "http://localhost:8001",
    "mock_mode": true,  // í…ŒìŠ¤íŠ¸: true, í”„ë¡œë•ì…˜: false
    "gaze": {
        "dwell_time": 0.8,
        "screen_width": 1920,
        "screen_height": 1080,
        "camera_index": 0
    },
    "polling": {
        "device_status_interval": 5.0,
        "recommendation_interval": 3.0
    }
}
```

#### 5ï¸âƒ£ ì„œë²„ ì‹¤í–‰

```bash
cd edge
python app.py
```

ë¸Œë¼ìš°ì €ì—ì„œ **http://localhost:8000** ì ‘ì†

---

### ğŸ³ ë°©ë²• 2: Docker ì‹¤í–‰ (ë°°í¬ìš©)

#### 1ï¸âƒ£ Docker ì„¤ì¹˜ í™•ì¸

```bash
docker --version
docker-compose --version
```

#### 2ï¸âƒ£ ì„¤ì • íŒŒì¼ ì¤€ë¹„

`edge/config.json` íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ì—†ìœ¼ë©´ ìœ„ì˜ ì˜ˆì‹œë¥¼ ì°¸ê³ í•˜ì—¬ ìƒì„±í•©ë‹ˆë‹¤.

#### 3ï¸âƒ£ Docker Composeë¡œ ì‹¤í–‰

```bash
# ì´ë¯¸ì§€ ë¹Œë“œ ë° ì»¨í…Œì´ë„ˆ ì‹œì‘
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f

# ì¤‘ì§€
docker-compose stop

# ì™„ì „ ì‚­ì œ
docker-compose down
```

#### 4ï¸âƒ£ ë¼ì¦ˆë² ë¦¬íŒŒì´ ìë™ ë°°í¬

```bash
# ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
chmod +x run_raspberry_pi.sh

# ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
./run_raspberry_pi.sh
```

ìŠ¤í¬ë¦½íŠ¸ëŠ” ìë™ìœ¼ë¡œ ë‹¤ìŒì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:
- Docker ë° ì¹´ë©”ë¼ í™•ì¸
- config.json ìƒì„± (ì—†ëŠ” ê²½ìš°)
- ì´ë¯¸ì§€ ë¹Œë“œ
- ì»¨í…Œì´ë„ˆ ì‹¤í–‰
- ì‹¤ì‹œê°„ ë¡œê·¸ ì¶œë ¥

---

## ğŸ® ì‚¬ìš© ë°©ë²•

### 1ï¸âƒ£ ì‹œì„  ë³´ì • (Calibration)

ì²˜ìŒ ì‚¬ìš© ì‹œ ë°˜ë“œì‹œ ì‹œì„  ë³´ì •ì„ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

1. ì›¹ UIì—ì„œ **"ì‹œì„  ë³´ì • ì‹œì‘"** ë²„íŠ¼ í´ë¦­
2. í™”ë©´ì— ë‚˜íƒ€ë‚˜ëŠ” **ë¹¨ê°„ ì **ì„ 2-3ì´ˆê°„ ì‘ì‹œ
3. 5ê°œ í¬ì¸íŠ¸ Ã— 30ìƒ˜í”Œ ìë™ ìˆ˜ì§‘
4. ë³´ì • ì™„ë£Œ í›„ `calibration_params.json`ì— ìë™ ì €ì¥

**ë³´ì • íŒ:**
- âœ… ì–¼êµ´ì„ í™”ë©´ ì¤‘ì•™ì— ìœ„ì¹˜
- âœ… ì¶©ë¶„í•œ ì¡°ëª… í™•ë³´ (ì •ë©´ ì¡°ëª… ê¶Œì¥)
- âœ… ì¹´ë©”ë¼ì™€ 40-60cm ê±°ë¦¬ ìœ ì§€
- âœ… ì•ˆê²½ ì°©ìš© ì‹œ ë¹› ë°˜ì‚¬ ì£¼ì˜

---

### 2ï¸âƒ£ í´ë¦­ ëª¨ë“œ

#### ğŸ”µ Dwell Click (ì‘ì‹œ í´ë¦­)

ê°€ì¥ ì£¼ìš”í•œ í´ë¦­ ë°©ì‹ì…ë‹ˆë‹¤.

1. ì œì–´í•˜ê³  ì‹¶ì€ **ë””ë°”ì´ìŠ¤ ì¹´ë“œ**ë¥¼ ì‘ì‹œ
2. ì•½ **0.8ì´ˆ** ë™ì•ˆ ì‹œì„  ìœ ì§€
3. íŒŒë€ ì›ì´ ì ì  ì»¤ì§€ë©° **ì§„í–‰ë„ í‘œì‹œ**
4. ì‹œê°„ ì™„ë£Œ ì‹œ **ìë™ í´ë¦­**

#### ğŸ‘ï¸ Blink Click (ê¹œë¹¡ì„ í´ë¦­)

ë³´ì¡° í´ë¦­ ë°©ì‹ì…ë‹ˆë‹¤.

1. ëŒ€ìƒì„ ë³´ë©´ì„œ **ì˜ë„ì ìœ¼ë¡œ ëˆˆ ê°ê¸°**
2. **0.3~1.0ì´ˆ** ì‚¬ì´ì˜ ê¹œë¹¡ì„ë§Œ ì¸ì‹
3. ìì—°ìŠ¤ëŸ¬ìš´ ê¹œë¹¡ì„(< 0.3ì´ˆ)ì€ ë¬´ì‹œ

**ë¯¼ê°ë„ ì¡°ì •:**
ë³´ì • í™”ë©´ì—ì„œ "ì‘ì‹œ ë¯¼ê°ë„" ìŠ¬ë¼ì´ë”ë¡œ **0.3~2.0ì´ˆ** ë²”ìœ„ ì¡°ì ˆ ê°€ëŠ¥

---

### 3ï¸âƒ£ ë””ë°”ì´ìŠ¤ ì œì–´

#### ìƒíƒœ í™•ì¸
- ë””ë°”ì´ìŠ¤ ì¹´ë“œì— **ì‹¤ì‹œê°„ ìƒíƒœ** í‘œì‹œ
- ğŸŸ¢ ë…¹ìƒ‰ = ON
- âšª íšŒìƒ‰ = OFF
- ğŸ”„ 5ì´ˆë§ˆë‹¤ ìë™ ì—…ë°ì´íŠ¸

#### ì œì–´ ì‹¤í–‰
1. ë””ë°”ì´ìŠ¤ë¥¼ **ì‘ì‹œ í´ë¦­** ë˜ëŠ” **ê¹œë¹¡ì„ í´ë¦­**
2. AI ì„œë¹„ìŠ¤ê°€ **ì‚¬ìš©ì ì˜ë„ ë¶„ì„**
3. **ì¶”ì²œ íŒì—…** í‘œì‹œ
4. **YES** ë˜ëŠ” **NO** ì„ íƒ

---

### 4ï¸âƒ£ AI ì¶”ì²œ ì‹œìŠ¤í…œ

AIê°€ ë‹¤ìŒ ì •ë³´ë¥¼ ë¶„ì„í•˜ì—¬ ì¶”ì²œí•©ë‹ˆë‹¤:

- â° **ì‹œê°„ëŒ€**: ì•„ì¹¨/ì ì‹¬/ì €ë…
- ğŸŒ¤ï¸ **ë‚ ì”¨**: MCP(Model Context Protocol)ë¥¼ í†µí•œ ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´
- ğŸ“Š **ë””ë°”ì´ìŠ¤ ìƒíƒœ**: í˜„ì¬ ON/OFF, ì˜¨ë„ ë“±
- ğŸ“ˆ **ì‚¬ìš© íŒ¨í„´**: ê³¼ê±° ì œì–´ íˆìŠ¤í† ë¦¬

**ì˜ˆì‹œ:**
- ì €ë… 7ì‹œ + ì¶”ìš´ ë‚ ì”¨ â†’ "ë‚œë°©ì„ 22ë„ë¡œ ì¼œì‹œê² ìŠµë‹ˆê¹Œ?"
- ë°¤ 11ì‹œ + ì¡°ëª… ì¼œì§ â†’ "ëª¨ë“  ì¡°ëª…ì„ ë„ì‹œê² ìŠµë‹ˆê¹Œ?"

---

## ğŸ”Œ API ë¬¸ì„œ

### REST API ì—”ë“œí¬ì¸íŠ¸

<details>
<summary><b>GET /api/state</b> - ì‹œìŠ¤í…œ ìƒíƒœ ì¡°íšŒ</summary>

**Response:**
```json
{
  "user_uuid": "8f6b3c54-7b3b-4d4c-9e5d-2e8b1c1d4f99",
  "calibrated": true,
  "devices": [
    {
      "device_id": "ac_living_room",
      "name": "ê±°ì‹¤ ì—ì–´ì»¨",
      "device_type": "air_conditioner",
      "current_state": {
        "is_on": true,
        "temperature": 24
      }
    }
  ],
  "recommendation": null
}
```
</details>

<details>
<summary><b>POST /api/devices/{device_id}/control</b> - ë””ë°”ì´ìŠ¤ ì œì–´</summary>

**Request:**
```json
{
  "action": "toggle",  // "turn_on", "turn_off", "set_temperature"
  "parameters": {
    "temperature": 24  // ì„ íƒì 
  }
}
```

**Response:**
```json
{
  "success": true,
  "device_id": "ac_living_room",
  "new_state": {
    "is_on": false,
    "temperature": 24
  }
}
```
</details>

<details>
<summary><b>POST /api/calibration/start</b> - ë³´ì • ì‹œì‘</summary>

**Response:**
```json
{
  "status": "started",
  "total_targets": 5,
  "samples_per_target": 30
}
```
</details>

<details>
<summary><b>GET /api/calibration/progress</b> - ë³´ì • ì§„í–‰ ìƒí™©</summary>

**Response:**
```json
{
  "is_complete": false,
  "current_target": 2,
  "total_targets": 5,
  "current_samples": 15,
  "required_samples": 30,
  "target_position": [960, 540]
}
```
</details>

<details>
<summary><b>POST /api/dwell-time</b> - ì‘ì‹œ ì‹œê°„ ì„¤ì •</summary>

**Request:**
```json
{
  "dwell_time": 0.8
}
```

**Response:**
```json
{
  "success": true,
  "dwell_time": 0.8
}
```
</details>

---

### WebSocket API

ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹ ì„ ìœ„í•œ WebSocket ì—”ë“œí¬ì¸íŠ¸: `ws://localhost:8000/ws`

#### ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸ ë©”ì‹œì§€

<details>
<summary><b>gaze</b> - ì‹œì„  ìœ„ì¹˜ ì—…ë°ì´íŠ¸</summary>

```json
{
  "type": "gaze",
  "position": {"x": 960, "y": 540},
  "pupils_detected": true,
  "timestamp": 1234567890.123
}
```
</details>

<details>
<summary><b>dwell</b> - Dwell ì§„í–‰ë„</summary>

```json
{
  "type": "dwell",
  "progress": 0.65,  // 0.0 ~ 1.0
  "position": {"x": 960, "y": 540}
}
```
</details>

<details>
<summary><b>click</b> - í´ë¦­ ì´ë²¤íŠ¸</summary>

```json
{
  "type": "click",
  "method": "dwell",  // "dwell" or "blink"
  "position": {"x": 960, "y": 540},
  "device_id": "ac_living_room"  // AOI ë§¤í•‘ ì„±ê³µ ì‹œ
}
```
</details>

<details>
<summary><b>state</b> - ì‹œìŠ¤í…œ ìƒíƒœ ì—…ë°ì´íŠ¸</summary>

```json
{
  "type": "state",
  "calibrated": true,
  "devices": [...],
  "recommendation": {...}
}
```
</details>

---

### Gateway API í†µí•©

Edge DeviceëŠ” AI Serviceë¥¼ í†µí•´ Gatewayì™€ í†µì‹ í•©ë‹ˆë‹¤.

**ë°ì´í„° íë¦„:**
```
Edge Device â†’ AI Service (Port 8001) â†’ Gateway â†’ Smart Device
```

**Mock ëª¨ë“œ:**
- `mock_mode: true`: ê°€ìƒ ë””ë°”ì´ìŠ¤ë¡œ UI í…ŒìŠ¤íŠ¸
- `mock_mode: false`: ì‹¤ì œ Gateway ì—°ë™

---

## âš™ï¸ ì„¤ì • ë ˆí¼ëŸ°ìŠ¤

| íŒŒë¼ë¯¸í„°                          | ì„¤ëª…                         | ê¸°ë³¸ê°’                                   |
| --------------------------------- | ---------------------------- | ---------------------------------------- |
| `user_uuid`                       | ì‚¬ìš©ì ê³ ìœ  ì‹ë³„ì           | `"8f6b3c54-7b3b-4d4c-9e5d-2e8b1c1d4f99"` |
| `ai_service_url`                  | AI ì„œë¹„ìŠ¤ URL                | `"http://localhost:8001"`                |
| `mock_mode`                       | Mock ëª¨ë“œ í™œì„±í™” (í…ŒìŠ¤íŠ¸ìš©)  | `false`                                  |
| `gaze.dwell_time`                 | Dwell í´ë¦­ ì‘ì‹œ ì‹œê°„ (ì´ˆ)    | `0.8`                                    |
| `gaze.screen_width`               | í™”ë©´ ë„ˆë¹„ (í”½ì…€)             | `1920`                                   |
| `gaze.screen_height`              | í™”ë©´ ë†’ì´ (í”½ì…€)             | `1080`                                   |
| `gaze.camera_index`               | ì¹´ë©”ë¼ ë””ë°”ì´ìŠ¤ ì¸ë±ìŠ¤       | `0`                                      |
| `polling.device_status_interval`  | ë””ë°”ì´ìŠ¤ ìƒíƒœ ê°±ì‹  ì£¼ê¸° (ì´ˆ) | `5.0`                                    |
| `polling.recommendation_interval` | AI ì¶”ì²œ í´ë§ ì£¼ê¸° (ì´ˆ)       | `3.0`                                    |

---

## ğŸ› ë¬¸ì œ í•´ê²°

### âŒ ì¹´ë©”ë¼ê°€ ì—´ë¦¬ì§€ ì•ŠìŒ

```bash
# ì‚¬ìš© ê°€ëŠ¥í•œ ì¹´ë©”ë¼ í™•ì¸
python -c "import cv2; print([i for i in range(5) if cv2.VideoCapture(i).isOpened()])"

# config.jsonì—ì„œ camera_index ìˆ˜ì •
```

**Docker ì‚¬ìš© ì‹œ:**
```bash
# ì¹´ë©”ë¼ ê¶Œí•œ í™•ì¸
ls -l /dev/video*

# ê¶Œí•œ ë¶€ì—¬
sudo chmod 666 /dev/video0
sudo usermod -aG video $USER
```

---

### âŒ ë™ê³µ ê°ì§€ ì•ˆ ë¨ (pupils_detected=False)

**ì›ì¸:**
- ì¡°ëª… ë¶€ì¡±
- ì–¼êµ´ ê°ë„
- ì¹´ë©”ë¼ ê±°ë¦¬

**í•´ê²°:**
- âœ… ì¡°ëª…ì„ **ë°ê²Œ** ì¡°ì • (ì •ë©´ ì¡°ëª… ê¶Œì¥)
- âœ… ì–¼êµ´ì„ **í™”ë©´ ì •ë©´**ì— ìœ„ì¹˜
- âœ… ì¹´ë©”ë¼ì™€ **40-60cm** ê±°ë¦¬ ìœ ì§€
- âœ… ì•ˆê²½ ì°©ìš© ì‹œ **ë¹› ë°˜ì‚¬** ê°ë„ ì¡°ì •

---

### âŒ WebSocket ì—°ê²° ëŠê¹€

```bash
# uvicorn[standard] ì¬ì„¤ì¹˜
pip install --upgrade 'uvicorn[standard]'

# ë°©í™”ë²½ í™•ì¸
sudo ufw allow 8000
```

---

### âŒ dlib ì„¤ì¹˜ ì‹¤íŒ¨

<details>
<summary><b>macOS</b></summary>

```bash
brew install cmake
pip install dlib
```
</details>

<details>
<summary><b>Ubuntu/Debian</b></summary>

```bash
sudo apt-get install cmake libboost-all-dev
pip install dlib
```
</details>

<details>
<summary><b>Raspberry Pi (ì˜¤ë˜ ê±¸ë¦¼: 1-2ì‹œê°„)</b></summary>

```bash
# piwheels ì‚¬ìš© (ë¹ ë¦„)
pip install dlib --extra-index-url https://www.piwheels.org/simple

# ë˜ëŠ” ì†ŒìŠ¤ ë¹Œë“œ (ëŠë¦¼)
sudo apt-get install cmake libboost-all-dev
pip install dlib
```
</details>

---

### âŒ Gateway/AI Service ì‘ë‹µ ì—†ìŒ

1. **ì„œë²„ ì‹¤í–‰ í™•ì¸**
   ```bash
   curl http://localhost:8001/health
   curl http://localhost:8000/health
   ```

2. **config.json URL í™•ì¸**
   ```json
   {
     "ai_service_url": "http://localhost:8001"
   }
   ```

3. **ë°©í™”ë²½ ì„¤ì •**
   ```bash
   sudo ufw allow 8000
   sudo ufw allow 8001
   ```

---

### âŒ ë³´ì •ì´ ë¶€ì •í™•í•¨

- âœ… **ì¶©ë¶„í•œ ì¡°ëª…** í™•ë³´
- âœ… ë³´ì • ì¤‘ **ë¨¸ë¦¬ ê³ ì •**
- âœ… **ì¬ë³´ì •** ìˆ˜í–‰ ("ì‹œì„  ë³´ì • ì‹œì‘" ë‹¤ì‹œ í´ë¦­)
- âœ… `gaze/calibrator.py`ì˜ `stability_threshold` ì¡°ì •

```python
# gaze/calibrator.py
STABILITY_THRESHOLD = 30  # ê¸°ë³¸ê°’, ë†’ì¼ìˆ˜ë¡ ì•ˆì •ì 
```

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### ë¼ì¦ˆë² ë¦¬íŒŒì´ ìµœì í™”

#### 1ï¸âƒ£ ë¹„ë””ì˜¤ í•´ìƒë„ ì¤„ì´ê¸°

`edge/app.py` ìˆ˜ì •:

```python
# ì¹´ë©”ë¼ ì½ê¸° ì „ì— ì¶”ê°€
camera.set(cv2.CAP_PROP_FRAME_WIDTH, 640)
camera.set(cv2.CAP_PROP_FRAME_HEIGHT, 480)
```

#### 2ï¸âƒ£ í´ë§ ì£¼ê¸° ëŠ˜ë¦¬ê¸°

`edge/config.json` ìˆ˜ì •:

```json
{
  "polling": {
    "device_status_interval": 10.0,  // 5.0 â†’ 10.0
    "recommendation_interval": 5.0   // 3.0 â†’ 5.0
  }
}
```

#### 3ï¸âƒ£ í•˜ë“œì›¨ì–´ ê°€ì† í™œì„±í™”

```bash
# OpenCL ì„¤ì¹˜ (Raspberry Pi)
sudo apt-get install ocl-icd-libopencl1
```

---

### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰

| êµ¬ì„±ìš”ì†Œ           | ë©”ëª¨ë¦¬     |
| ------------------ | ---------- |
| Python + FastAPI   | ~150MB     |
| dlib ëª¨ë¸          | ~100MB     |
| OpenCV + ì›¹ìº  ë²„í¼ | ~50MB      |
| **ì´í•©**           | **~300MB** |

---

### í”„ë ˆì„ ë ˆì´íŠ¸

| í™˜ê²½           | FPS       |
| -------------- | --------- |
| ê³ ì„±ëŠ¥ PC      | 30 FPS    |
| ë¼ì¦ˆë² ë¦¬íŒŒì´ 4 | 15-20 FPS |
| ë¼ì¦ˆë² ë¦¬íŒŒì´ 3 | 10-15 FPS |

`edge/app.py`ì—ì„œ ì¡°ì • ê°€ëŠ¥:

```python
# í”„ë ˆì„ ë ˆì´íŠ¸ ì œí•œ
await asyncio.sleep(1/30)  # 30 FPS
```

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

âš ï¸ **ì´ í”„ë¡œì íŠ¸ëŠ” ë°ëª¨ êµ¬í˜„ì²´ì…ë‹ˆë‹¤.**

í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë‹¤ìŒì„ ì¶”ê°€í•˜ì„¸ìš”:

- ğŸ” **ì¸ì¦ ì‹œìŠ¤í…œ**: JWT í† í° ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦
- ğŸ”’ **HTTPS**: SSL/TLS ì•”í˜¸í™” í†µì‹ 
- ğŸ›¡ï¸ **CORS ì œí•œ**: í—ˆìš©ëœ ë„ë©”ì¸ë§Œ ì ‘ê·¼
- ğŸ“¦ **ë³´ì • ë°ì´í„° ì•”í˜¸í™”**: `calibration_params.json` ì•”í˜¸í™”
- ğŸš¦ **Rate Limiting**: API í˜¸ì¶œ ì œí•œ
- ğŸ”‘ **WebSocket ì¸ì¦**: í† í° ê¸°ë°˜ WebSocket ì—°ê²°

---

## ğŸ“ ë°ì´í„° íë¦„

```
1. ì¹´ë©”ë¼ â†’ ì‹œì„  ì¶”ì  â†’ ë³´ì • ë³€í™˜ â†’ ìŠ¤í¬ë¦° ì¢Œí‘œ

2. ìŠ¤í¬ë¦° ì¢Œí‘œ â†’ Dwell ê°ì§€ â†’ í´ë¦­ ì´ë²¤íŠ¸

3. í´ë¦­ ì´ë²¤íŠ¸ â†’ AOI ë§¤í•‘ â†’ ë””ë°”ì´ìŠ¤ ID + ì•¡ì…˜

4. ë””ë°”ì´ìŠ¤ ì •ë³´ â†’ AI ì„œë¹„ìŠ¤ â†’ ì˜ë„ ë¶„ì„ â†’ ì¶”ì²œ

5. ì¶”ì²œ â†’ ì‚¬ìš©ì (YES/NO) â†’ AI ì„œë¹„ìŠ¤ ì‘ë‹µ

6. YES â†’ Gateway ì œì–´ â†’ ë””ë°”ì´ìŠ¤ ìƒíƒœ ì—…ë°ì´íŠ¸ â†’ UI ê°±ì‹ 
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸

### Mock ëª¨ë“œ í…ŒìŠ¤íŠ¸

`edge/config.json`ì—ì„œ `mock_mode: true` ì„¤ì • í›„:

```bash
cd edge
python app.py
```

**Mock ëª¨ë“œ ê¸°ëŠ¥:**
- ê°€ìƒ ë””ë°”ì´ìŠ¤ 3ê°œ (ì—ì–´ì»¨, ì¡°ëª…, ì˜¨ë„ì¡°ì ˆê¸°)
- AI ì¶”ì²œ ì‹œë®¬ë ˆì´ì…˜
- Gateway ì—†ì´ UI í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

---

### ë¸Œëœì¹˜ë³„ ëª¨ë“œ

```bash
# í…ŒìŠ¤íŠ¸ ë¸Œëœì¹˜ (Mock ëª¨ë“œ)
git checkout test
git checkout test2

# í”„ë¡œë•ì…˜ ë¸Œëœì¹˜ (Real ëª¨ë“œ)
git checkout main
```

---

## ğŸš€ ë°°í¬ ê°€ì´ë“œ

### Raspberry Pi ë°°í¬

1. **Docker ì„¤ì¹˜**
   ```bash
   curl -fsSL https://get.docker.com -o get-docker.sh
   sh get-docker.sh
   sudo usermod -aG docker $USER
   ```

2. **Docker Compose ì„¤ì¹˜**
   ```bash
   sudo apt-get install docker-compose
   ```

3. **í”„ë¡œì íŠ¸ í´ë¡ **
   ```bash
   git clone https://github.com/yourusername/gazehome-edge.git
   cd gazehome-edge
   ```

4. **ìë™ ë°°í¬**
   ```bash
   chmod +x run_raspberry_pi.sh
   ./run_raspberry_pi.sh
   ```

5. **ì ‘ì†**
   ```
   http://<raspberry-pi-ip>:8000
   ```

---

### Systemd ì„œë¹„ìŠ¤ ë“±ë¡ (ìë™ ì‹œì‘)

```bash
sudo tee /etc/systemd/system/gazehome-edge.service > /dev/null <<EOF
[Unit]
Description=GazeHome Edge Device
After=network.target

[Service]
Type=simple
User=$USER
WorkingDirectory=$(pwd)
ExecStart=$(pwd)/venv/bin/python $(pwd)/edge/app.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# ì„œë¹„ìŠ¤ í™œì„±í™”
sudo systemctl daemon-reload
sudo systemctl enable gazehome-edge.service
sudo systemctl start gazehome-edge.service

# ìƒíƒœ í™•ì¸
sudo systemctl status gazehome-edge.service
```

---

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

ì´ìŠˆ ë° Pull Requestë¥¼ í™˜ì˜í•©ë‹ˆë‹¤!

### ê°œë°œ í™˜ê²½ ì„¤ì •

```bash
# ë ˆí¬ì§€í† ë¦¬ í¬í¬ í›„ í´ë¡ 
git clone https://github.com/yourusername/gazehome-edge.git
cd gazehome-edge

# ê°œë°œ ë¸Œëœì¹˜ ìƒì„±
git checkout -b feature/my-feature

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# ì»¤ë°‹ ë° í‘¸ì‹œ
git add .
git commit -m "feat: add new feature"
git push origin feature/my-feature
```

---

## ğŸ“ í–¥í›„ ê°œì„  ê³„íš

- [ ] **WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì¶”ì²œ** (í´ë§ ëŒ€ì²´)
- [ ] **ë©€í‹°ìœ ì € ì§€ì›** (ì–¼êµ´ ì¸ì‹)
- [ ] **ìŒì„± í™•ì¸** (ì¶”ì²œì— ëŒ€í•œ ìŒì„± ì‘ë‹µ)
- [ ] **ì œìŠ¤ì²˜ ëª…ë ¹** (ê³ ê°œ ë„ë•ì„, í”ë“¤ê¸°)
- [ ] **ì˜¤í”„ë¼ì¸ ëª¨ë“œ** (ìºì‹œëœ ì¶”ì²œ)
- [ ] **PWA ì§€ì›** (ëª¨ë°”ì¼ ì ‘ê·¼)
- [ ] **ë¶„ì„ ëŒ€ì‹œë³´ë“œ** (ì‚¬ìš© íŒ¨í„´ ì‹œê°í™”)
- [ ] **ì»¤ìŠ¤í…€ AOI í¸ì§‘ê¸°** (ì‚¬ìš©ì ì •ì˜ ì˜ì—­)

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ì ‘ê·¼ì„± í–¥ìƒì„ ëª©í‘œë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.  
ìì„¸í•œ ë¼ì´ì„ ìŠ¤ëŠ” [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

---

## ğŸ™ í¬ë ˆë”§

- **[GazeTracking](https://github.com/antoinelame/GazeTracking)** - ê¸°ë³¸ ì‹œì„  ì¶”ì  ë¼ì´ë¸ŒëŸ¬ë¦¬
- **[dlib](http://dlib.net/)** - ì–¼êµ´ ëœë“œë§ˆí¬ ê°ì§€
- **[FastAPI](https://fastapi.tiangolo.com/)** - ì›¹ í”„ë ˆì„ì›Œí¬
- **[OpenCV](https://opencv.org/)** - ì»´í“¨í„° ë¹„ì „ ë¼ì´ë¸ŒëŸ¬ë¦¬

---

## ğŸ“ ë¬¸ì˜

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ [GitHub Issues](https://github.com/yourusername/gazehome-edge/issues)ì— ë“±ë¡í•´ì£¼ì„¸ìš”.

---

<p align="center">
  <b>Built with â¤ï¸ for Accessibility</b><br>
  <i>GazeHome Project</i>
</p>
